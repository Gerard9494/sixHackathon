// Generated by CoffeeScript 1.10.0
(function() {
  var Client, Manager, ObjectId, async, express, mongoose, router;

  express = require('express');

  router = express.Router();

  mongoose = require('mongoose');

  ObjectId = mongoose.Types.ObjectId;

  Manager = mongoose.model('Manager');

  Client = mongoose.model('Client');

  async = require('async');

  router.post('/', function(req, res, next) {
    return async.waterfall([
      function(callback) {
        var client;
        client = new Client({
          name: req.body.name
        });
        return client.save(callback);
      }, function(savedClient, nInserted, callback) {
        return callback(null, savedClient);
      }
    ], function(err, result) {
      if (err) {
        console.log(err);
        return res.status(500).json(err);
      } else {
        console.log(result);
        return res.status(200).json(result);
      }
    });
  });

  module.exports = router;

}).call(this);
